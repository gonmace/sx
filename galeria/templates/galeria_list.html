{% extends 'base.html' %}

{% block body_class %}bg-secondary min-h-screen{% endblock %}

{% block content %}

<h1 class="text-primary text-center pt-6">REPORTE CONSTRUCCION SITIOS</h1>
<div class="flex justify-end"> <!-- Contenedor Flex para alinear a la derecha -->
    <a href="{% url 'galeria:upload' %}" class="text-white btn btn-primary mr-2">Cargar Reporte</a>
</div>
<div class="sm:container mx-auto px-4 py-8">
    <div class="flex flex-col sm:flex-row gap-3">
        {% for sitio in galerias %}
            <div class="bg-white rounded-lg p-3 overflow-hidden w-full md:w-1/3 mx-auto">
                {% if sitio.ultima_imagen and sitio.ultima_imagen.imagen and sitio.ultima_imagen.imagen.file %}
                <div>
                    <h2 class="text-center font-bold">{{ sitio.sitio }}</h2>
                    <h3 class="text-center mb-3 font-bold">{{ sitio.nombre }}</h3>
                    <p>Último reporte: {{ sitio.ultima_imagen.fecha_carga|date:"d/m/Y" }}</p>
                    <div class="flex justify-between space-x-2 mt-3">
                        <label for="topografia" class="text-sm font-medium text-gray-700">Replanteo Topografico</label>
                        <input type="range" id="topografia" disabled  min="0" max="100" value="{{ sitio.topografia }}" class="range range-info rangos"/>
                    </div>
                    <div class="flex justify-between space-x-2">
                        <label for="terreno" class="text-sm font-medium text-gray-700">Preparación Terreno</label>
                        <input type="range" id="terreno" disabled  min="0" max="100" value="{{ sitio.terreno }}" class="range range-info rangos"/>
                    </div>
                    <div class="flex justify-between space-x-2">
                        <label for="muro" class="text-sm font-medium text-gray-700">Muro Perimetral</label>
                        <input type="range" id="mur" disabled  min="0" max="100" value="{{ sitio.muro }}" class="range range-info rangos"/>
                    </div>
                    <div class="flex justify-between space-x-2">
                        <label for="grava" class="text-sm font-medium text-gray-700">Grava Geomembrana</label>
                        <input type="range" id="grava" disabled  min="0" max="100" value="{{ sitio.grava_geomembrana }}" class="range range-info rangos"/>
                    </div>
                    <div class="flex justify-between space-x-2">
                        <label for="porton_acceso" class="text-sm font-medium text-gray-700">Portón y Acceso</label>
                        <input type="range" id="porton_acceso" disabled  min="0" max="100" value="{{ sitio.porton_acceso }}" class="range range-info rangos"/>
                    </div>
                    <div class="flex justify-between space-x-2">
                        <label for="spat" class="text-sm font-medium text-gray-700">Sistema Puesta Tierra</label>
                        <input type="range" id="spat" disabled  min="0" max="100" value="{{ sitio.spat }}" class="range range-info rangos"/>
                    </div>
                    <div class="flex justify-between space-x-2">
                        <label for="electrico" class="text-sm font-medium text-gray-700">Sistema Electrico</label>
                        <input type="range" id="electrico" disabled  min="0" max="100" value="{{ sitio.electrico }}" class="range range-info rangos"/>
                    </div>
                    <div class="flex justify-between space-x-2 my-3">
                        <label for="avance" class="text-sm font-medium text-gray-700">{{ sitio.avance_total }}%</label>
                        <input type="range" id="avance" disabled  min="0" max="100" value="{{ sitio.avance_total }}" class="range range-success range-xs w-full"/>
                        <a href="{% url 'galeria:edit_sitio' slug=sitio.slug %}" class="btn btn-xs btn-primary text-white">Actualizar</a>
                    </div>
                </div>
                
                <a href="{% url 'galeria:galeria_detail' slug=sitio.slug %}">
                    <img src="{{ sitio.ultima_imagen.imagen.url }}" alt="Imagen destacada de {{ sitio.nombre }}" class="object-cover rounded-md">
                </a>
            </div>
            {% else %}
            <div class="w-full h-full bg-gray-200 flex items-center justify-center">
                <span>No hay reportes</span>
            </div>
            {% endif %}
        {% endfor %}
    </div>
</div>

{% endblock content %}
