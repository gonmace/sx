{% extends 'base.html' %}

{% block body_class %}bg-secondary min-h-screen{% endblock %}

{% block content %}

<h1 class="text-primary text-center pt-6">REPORTE CONSTRUCCION SITIOS</h1>
<div class="flex justify-end"> <!-- Contenedor Flex para alinear a la derecha -->
    <a href="{% url 'galeria:upload' %}" class="text-white btn btn-primary mr-2">Cargar Reporte</a>
</div>
<div class="sm:container mx-auto px-4 py-8">
    <div class="flex flex-col sm:flex-row gap-3">
        {% for sitio in galerias %}
            <div class="bg-white rounded-lg p-3 overflow-hidden w-full md:w-1/3 mx-auto">
                {% if sitio.ultima_imagen and sitio.ultima_imagen.imagen and sitio.ultima_imagen.imagen.file %}
                    <div>
                        <h2 class="text-center font-bold">{{ sitio.sitio }}</h2>
                        <h3 class="text-center mb-3 font-bold">{{ sitio.nombre }}</h3>
                        <p>Ãšltimo reporte: {{ sitio.ultima_imagen.fecha_carga|date:"d/m/Y" }}</p>
                        <a href="{% url 'galeria:galeria_detail' slug=sitio.slug %}">
                            <img src="{{ sitio.ultima_imagen.imagen.url }}" alt="Imagen destacada de {{ sitio.nombre }}" class="object-cover rounded-md">
                        </a>
                    </div>
                {% else %}
                    <div class="w-full h-full bg-gray-200 flex items-center justify-center">
                        <span>No hay reportes</span>
                    </div>
                {% endif %}
            </div>
        {% endfor %}
    </div>
</div>

{% endblock content %}
